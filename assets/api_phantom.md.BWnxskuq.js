import{_ as s,c as a,o as n,aB as t}from"./chunks/framework.CL1dKlUq.js";const c=JSON.parse('{"title":"Phantom Auction API","description":"","frontmatter":{},"headers":[],"relativePath":"api/phantom.md","filePath":"api/phantom.md","lastUpdated":null}'),l={name:"api/phantom.md"};function e(p,i,h,k,r,d){return n(),a("div",null,[...i[0]||(i[0]=[t(`<h1 id="Phantom-Auction-API" tabindex="-1">Phantom Auction API <a class="header-anchor" href="#Phantom-Auction-API" aria-label="Permalink to &quot;Phantom Auction API {#Phantom-Auction-API}&quot;">​</a></h1><h2 id="Overview" tabindex="-1">Overview <a class="header-anchor" href="#Overview" aria-label="Permalink to &quot;Overview {#Overview}&quot;">​</a></h2><p>The Phantom Auction API provides comprehensive functionality for running price discovery auctions with simulated phantom bidders. This system implements VCG mechanisms for truthful bidding and captures MEV as user surplus.</p><h2 id="Core-Modules" tabindex="-1">Core Modules <a class="header-anchor" href="#Core-Modules" aria-label="Permalink to &quot;Core Modules {#Core-Modules}&quot;">​</a></h2><h3 id="PhantomAuction" tabindex="-1">PhantomAuction <a class="header-anchor" href="#PhantomAuction" aria-label="Permalink to &quot;PhantomAuction {#PhantomAuction}&quot;">​</a></h3><p>Main auction execution module for production phantom auctions.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PhantomAuction</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create and run a phantom auction</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auction_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    request,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseline_price,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseline_amount,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    deadline;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    global_config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> load_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h4 id="Types" tabindex="-1">Types <a class="header-anchor" href="#Types" aria-label="Permalink to &quot;Types {#Types}&quot;">​</a></h4><h5 id="improvementbid-t-improvementbid-t" tabindex="-1"><code>ImprovementBid{T}</code> {#ImprovementBid{T}} <a class="header-anchor" href="#improvementbid-t-improvementbid-t" aria-label="Permalink to &quot;\`ImprovementBid{T}\` {#ImprovementBid{T}}&quot;">​</a></h5><p>Represents a bid for price improvement.</p><p><strong>Fields:</strong></p><ul><li><p><code>bidder_id::String</code> - Unique bidder identifier</p></li><li><p><code>token_pair::Tuple{Int64, Int64}</code> - Token pair being traded</p></li><li><p><code>improved_price::T</code> - Improved price offer</p></li><li><p><code>volume::T</code> - Volume to trade</p></li><li><p><code>priority_fee::T</code> - Priority fee for execution</p></li><li><p><code>commitment_hash::Vector{UInt8}</code> - SHA-256 hash for commitment</p></li><li><p><code>nonce::Int64</code> - Nonce for replay protection</p></li><li><p><code>timestamp::DateTime</code> - Bid submission time</p></li></ul><h5 id="auctionresult-t-auctionresult-t" tabindex="-1"><code>AuctionResult{T}</code> {#AuctionResult{T}} <a class="header-anchor" href="#auctionresult-t-auctionresult-t" aria-label="Permalink to &quot;\`AuctionResult{T}\` {#AuctionResult{T}}&quot;">​</a></h5><p>Result of a phantom auction.</p><p><strong>Fields:</strong></p><ul><li><p><code>winning_bid::Union{ImprovementBid{T}, Nothing}</code> - Winning bid if any</p></li><li><p><code>price::T</code> - Final clearing price</p></li><li><p><code>amount::T</code> - Amount traded</p></li><li><p><code>improvement_bps::Float64</code> - Price improvement in basis points</p></li><li><p><code>num_participants::Int64</code> - Total number of participants</p></li><li><p><code>auction_duration_ms::Float64</code> - Auction duration in milliseconds</p></li></ul><h4 id="Functions" tabindex="-1">Functions <a class="header-anchor" href="#Functions" aria-label="Permalink to &quot;Functions {#Functions}&quot;">​</a></h4><h5 id="run_auctionrequest,-baseline_price,-baseline_amount,-deadline" tabindex="-1"><code>run_auction(request, baseline_price, baseline_amount, deadline)</code> <a class="header-anchor" href="#run_auctionrequest,-baseline_price,-baseline_amount,-deadline" aria-label="Permalink to &quot;\`run_auction(request, baseline_price, baseline_amount, deadline)\` {#run_auctionrequest,-baseline_price,-baseline_amount,-deadline}&quot;">​</a></h5><p>Execute a phantom auction.</p><p><strong>Parameters:</strong></p><ul><li><p><code>request</code> - Settlement request object</p></li><li><p><code>baseline_price::T</code> - Starting price for the auction</p></li><li><p><code>baseline_amount::T</code> - Quantity available</p></li><li><p><code>deadline::DateTime</code> - Auction deadline</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>AuctionResult{T}</code> - Auction results with winning bid and metrics</li></ul><p><strong>Example:</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    settlement_request,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># baseline price</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    1000.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># baseline amount</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Millisecond</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Clearing price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">price)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Improvement: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">improvement_bps)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h5 id="submit_bidauction,-bid" tabindex="-1"><code>submit_bid(auction, bid)</code> <a class="header-anchor" href="#submit_bidauction,-bid" aria-label="Permalink to &quot;\`submit_bid(auction, bid)\` {#submit_bidauction,-bid}&quot;">​</a></h5><p>Submit a sealed bid to an auction.</p><p><strong>Parameters:</strong></p><ul><li><p><code>auction::Auction{T}</code> - Active auction instance</p></li><li><p><code>bid::ImprovementBid{T}</code> - Bid to submit</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>Bool</code> - Success status</li></ul><h5 id="reveal_bidauction,-bid" tabindex="-1"><code>reveal_bid(auction, bid)</code> <a class="header-anchor" href="#reveal_bidauction,-bid" aria-label="Permalink to &quot;\`reveal_bid(auction, bid)\` {#reveal_bidauction,-bid}&quot;">​</a></h5><p>Reveal a previously submitted bid.</p><p><strong>Parameters:</strong></p><ul><li><p><code>auction::Auction{T}</code> - Auction in reveal phase</p></li><li><p><code>bid::ImprovementBid{T}</code> - Bid to reveal</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>Bool</code> - Success status</li></ul><h3 id="VCGMechanism" tabindex="-1">VCGMechanism <a class="header-anchor" href="#VCGMechanism" aria-label="Permalink to &quot;VCGMechanism {#VCGMechanism}&quot;">​</a></h3><p>Implementation of Vickrey-Clarke-Groves mechanism for truthful auctions.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VCGMechanism</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create VCG auction</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> VCGAuction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    supply </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reserve_price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enable_multi_unit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add bids</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bids, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VCGBid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bidder1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">55.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bids, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VCGBid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bidder2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">52.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run auction</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_vcg_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction)</span></span></code></pre></div><h4 id="Types-2" tabindex="-1">Types <a class="header-anchor" href="#Types-2" aria-label="Permalink to &quot;Types {#Types-2}&quot;">​</a></h4><h5 id="vcgbid-t-vcgbid-t" tabindex="-1"><code>VCGBid{T}</code> {#VCGBid{T}} <a class="header-anchor" href="#vcgbid-t-vcgbid-t" aria-label="Permalink to &quot;\`VCGBid{T}\` {#VCGBid{T}}&quot;">​</a></h5><p>A bid in the VCG auction.</p><p><strong>Fields:</strong></p><ul><li><p><code>bidder_id::String</code> - Bidder identifier</p></li><li><p><code>valuation::T</code> - Bid value/price</p></li><li><p><code>quantity::T</code> - Quantity desired</p></li><li><p><code>is_phantom::Bool</code> - Whether this is a phantom bid</p></li><li><p><code>metadata::Dict{Symbol, Any}</code> - Additional metadata</p></li></ul><h5 id="vcgallocation-t-vcgallocation-t" tabindex="-1"><code>VCGAllocation{T}</code> {#VCGAllocation{T}} <a class="header-anchor" href="#vcgallocation-t-vcgallocation-t" aria-label="Permalink to &quot;\`VCGAllocation{T}\` {#VCGAllocation{T}}&quot;">​</a></h5><p>Allocation result for a bidder.</p><p><strong>Fields:</strong></p><ul><li><p><code>bidder_id::String</code> - Winner identifier</p></li><li><p><code>quantity::T</code> - Quantity allocated</p></li><li><p><code>payment::T</code> - VCG payment amount</p></li><li><p><code>utility::T</code> - Bidder&#39;s utility (value - payment)</p></li></ul><h5 id="vcgresult-t-vcgresult-t" tabindex="-1"><code>VCGResult{T}</code> {#VCGResult{T}} <a class="header-anchor" href="#vcgresult-t-vcgresult-t" aria-label="Permalink to &quot;\`VCGResult{T}\` {#VCGResult{T}}&quot;">​</a></h5><p>Complete VCG auction result.</p><p><strong>Fields:</strong></p><ul><li><p><code>allocations::Vector{VCGAllocation{T}}</code> - All allocations</p></li><li><p><code>social_welfare::T</code> - Total social welfare</p></li><li><p><code>total_revenue::T</code> - Total payments collected</p></li><li><p><code>efficiency::Float64</code> - Efficiency ratio</p></li><li><p><code>phantom_participation_rate::Float64</code> - Phantom bidder percentage</p></li></ul><h4 id="Functions-2" tabindex="-1">Functions <a class="header-anchor" href="#Functions-2" aria-label="Permalink to &quot;Functions {#Functions-2}&quot;">​</a></h4><h5 id="run_vcg_auctionauction" tabindex="-1"><code>run_vcg_auction(auction)</code> <a class="header-anchor" href="#run_vcg_auctionauction" aria-label="Permalink to &quot;\`run_vcg_auction(auction)\` {#run_vcg_auctionauction}&quot;">​</a></h5><p>Execute VCG auction mechanism.</p><p><strong>Parameters:</strong></p><ul><li><code>auction::VCGAuction{T}</code> - Configured auction</li></ul><p><strong>Returns:</strong></p><ul><li><code>VCGResult{T}</code> - Complete auction results</li></ul><p><strong>Example:</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_vcg_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Social welfare: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">social_welfare)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Efficiency: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">efficiency)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allocation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">allocations</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(allocation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bidder_id)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(allocation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">quantity)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(allocation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">payment)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h5 id="verify_truthfulnessauction,-bidder_id,-true_value" tabindex="-1"><code>verify_truthfulness(auction, bidder_id, true_value)</code> <a class="header-anchor" href="#verify_truthfulnessauction,-bidder_id,-true_value" aria-label="Permalink to &quot;\`verify_truthfulness(auction, bidder_id, true_value)\` {#verify_truthfulnessauction,-bidder_id,-true_value}&quot;">​</a></h5><p>Verify that truthful bidding is optimal.</p><p><strong>Parameters:</strong></p><ul><li><p><code>auction::VCGAuction{T}</code> - Auction instance</p></li><li><p><code>bidder_id::String</code> - Bidder to verify</p></li><li><p><code>true_value::T</code> - True valuation</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>Bool</code> - Whether truthful bidding is optimal</li></ul><h5 id="individual_rationality_checkresult" tabindex="-1"><code>individual_rationality_check(result)</code> <a class="header-anchor" href="#individual_rationality_checkresult" aria-label="Permalink to &quot;\`individual_rationality_check(result)\` {#individual_rationality_checkresult}&quot;">​</a></h5><p>Verify all participants have non-negative utility.</p><p><strong>Parameters:</strong></p><ul><li><code>result::VCGResult{T}</code> - Auction result</li></ul><p><strong>Returns:</strong></p><ul><li><code>Bool</code> - Whether individual rationality holds</li></ul><h3 id="PhantomAuctionSimulator" tabindex="-1">PhantomAuctionSimulator <a class="header-anchor" href="#PhantomAuctionSimulator" aria-label="Permalink to &quot;PhantomAuctionSimulator {#PhantomAuctionSimulator}&quot;">​</a></h3><p>Advanced simulation framework for testing and analysis.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PhantomAuctionSimulator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Configure simulation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SimulationConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    num_real_bidders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    num_phantom_bidders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    auction_duration_ms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    num_simulations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enable_vcg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Set market conditions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">market </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MarketConditions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    volatility </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    liquidity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    trend </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create simulator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">simulator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PhantomSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config, market)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run Monte Carlo simulation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_monte_carlo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(simulator, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">analysis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> analyze_results</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(results)</span></span></code></pre></div><h4 id="Types-3" tabindex="-1">Types <a class="header-anchor" href="#Types-3" aria-label="Permalink to &quot;Types {#Types-3}&quot;">​</a></h4><h5 id="SimulationConfig" tabindex="-1"><code>SimulationConfig</code> <a class="header-anchor" href="#SimulationConfig" aria-label="Permalink to &quot;\`SimulationConfig\` {#SimulationConfig}&quot;">​</a></h5><p>Configuration for simulations.</p><p><strong>Fields:</strong></p><ul><li><p><code>num_real_bidders::Int</code> - Number of real participants</p></li><li><p><code>num_phantom_bidders::Int</code> - Number of phantom bidders</p></li><li><p><code>auction_duration_ms::Int</code> - Auction duration</p></li><li><p><code>num_simulations::Int</code> - Monte Carlo iterations</p></li><li><p><code>seed::Union{Int, Nothing}</code> - Random seed</p></li><li><p><code>enable_vcg::Bool</code> - Use VCG mechanism</p></li><li><p><code>enable_learning::Bool</code> - Enable adaptive strategies</p></li></ul><h5 id="MarketConditions" tabindex="-1"><code>MarketConditions</code> <a class="header-anchor" href="#MarketConditions" aria-label="Permalink to &quot;\`MarketConditions\` {#MarketConditions}&quot;">​</a></h5><p>Market environment parameters.</p><p><strong>Fields:</strong></p><ul><li><p><code>volatility::Float64</code> - Market volatility (0-1)</p></li><li><p><code>liquidity::Float64</code> - Liquidity score (0-1)</p></li><li><p><code>trend::Float64</code> - Market trend (-1 to 1)</p></li><li><p><code>spread::Float64</code> - Bid-ask spread in bps</p></li><li><p><code>volume::Float64</code> - Recent volume</p></li><li><p><code>correlation_matrix::Matrix{Float64}</code> - Bidder correlations</p></li></ul><h5 id="SimulationResult" tabindex="-1"><code>SimulationResult</code> <a class="header-anchor" href="#SimulationResult" aria-label="Permalink to &quot;\`SimulationResult\` {#SimulationResult}&quot;">​</a></h5><p>Result of a single simulation.</p><p><strong>Fields:</strong></p><ul><li><p><code>winning_bid::Union{SimulatedBid, Nothing}</code> - Winner</p></li><li><p><code>clearing_price::Float64</code> - Final price</p></li><li><p><code>total_surplus::Float64</code> - Economic surplus</p></li><li><p><code>metrics::SimulationMetrics</code> - Performance metrics</p></li><li><p><code>all_bids::Vector{SimulatedBid}</code> - All submitted bids</p></li><li><p><code>vcg_result::Union{VCGResult, Nothing}</code> - VCG results</p></li><li><p><code>convergence_path::Vector{Float64}</code> - Price path</p></li><li><p><code>execution_trace::Dict{String, Any}</code> - Debug information</p></li></ul><h4 id="Functions-3" tabindex="-1">Functions <a class="header-anchor" href="#Functions-3" aria-label="Permalink to &quot;Functions {#Functions-3}&quot;">​</a></h4><h5 id="run_simulationsimulator,-baseline_price,-baseline_quantity" tabindex="-1"><code>run_simulation(simulator, baseline_price, baseline_quantity)</code> <a class="header-anchor" href="#run_simulationsimulator,-baseline_price,-baseline_quantity" aria-label="Permalink to &quot;\`run_simulation(simulator, baseline_price, baseline_quantity)\` {#run_simulationsimulator,-baseline_price,-baseline_quantity}&quot;">​</a></h5><p>Run single auction simulation.</p><p><strong>Parameters:</strong></p><ul><li><p><code>simulator::PhantomSimulator</code> - Configured simulator</p></li><li><p><code>baseline_price::Float64</code> - Starting price</p></li><li><p><code>baseline_quantity::Float64</code> - Available quantity</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>SimulationResult</code> - Complete simulation results</li></ul><h5 id="run_monte_carlosimulator,-baseline_price,-baseline_quantity" tabindex="-1"><code>run_monte_carlo(simulator, baseline_price, baseline_quantity)</code> <a class="header-anchor" href="#run_monte_carlosimulator,-baseline_price,-baseline_quantity" aria-label="Permalink to &quot;\`run_monte_carlo(simulator, baseline_price, baseline_quantity)\` {#run_monte_carlosimulator,-baseline_price,-baseline_quantity}&quot;">​</a></h5><p>Run Monte Carlo simulation.</p><p><strong>Parameters:</strong></p><ul><li><p><code>simulator::PhantomSimulator</code> - Configured simulator</p></li><li><p><code>baseline_price::Float64</code> - Starting price</p></li><li><p><code>baseline_quantity::Float64</code> - Available quantity</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>Vector{SimulationResult}</code> - All simulation results</li></ul><h5 id="analyze_resultsresults" tabindex="-1"><code>analyze_results(results)</code> <a class="header-anchor" href="#analyze_resultsresults" aria-label="Permalink to &quot;\`analyze_results(results)\` {#analyze_resultsresults}&quot;">​</a></h5><p>Analyze simulation results statistically.</p><p><strong>Parameters:</strong></p><ul><li><code>results::Vector{SimulationResult}</code> - Simulation results</li></ul><p><strong>Returns:</strong></p><ul><li><code>Dict</code> - Statistical analysis including means, medians, quantiles</li></ul><p><strong>Example Output:</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;avg_price_improvement&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;mean&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 25.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;median&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 24.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;std&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;p95&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 35.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;mev_capture_rate&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;mean&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.823</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;median&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.835</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;std&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.091</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="Bidding-Strategies" tabindex="-1">Bidding Strategies <a class="header-anchor" href="#Bidding-Strategies" aria-label="Permalink to &quot;Bidding Strategies {#Bidding-Strategies}&quot;">​</a></h2><h3 id="Available-Strategies" tabindex="-1">Available Strategies <a class="header-anchor" href="#Available-Strategies" aria-label="Permalink to &quot;Available Strategies {#Available-Strategies}&quot;">​</a></h3><h4 id="AggressiveStrategy" tabindex="-1"><code>AggressiveStrategy</code> <a class="header-anchor" href="#AggressiveStrategy" aria-label="Permalink to &quot;\`AggressiveStrategy\` {#AggressiveStrategy}&quot;">​</a></h4><ul><li><p>High-frequency bidding (every 10ms)</p></li><li><p>Small improvements (10-15 bps)</p></li><li><p>Low priority fees</p></li><li><p>Best for liquid markets</p></li></ul><h4 id="ConservativeStrategy" tabindex="-1"><code>ConservativeStrategy</code> <a class="header-anchor" href="#ConservativeStrategy" aria-label="Permalink to &quot;\`ConservativeStrategy\` {#ConservativeStrategy}&quot;">​</a></h4><ul><li><p>Low-frequency bidding (every 30ms)</p></li><li><p>Large improvements (30-50 bps)</p></li><li><p>Higher priority fees</p></li><li><p>Best for volatile markets</p></li></ul><h4 id="AdaptiveStrategy" tabindex="-1"><code>AdaptiveStrategy</code> <a class="header-anchor" href="#AdaptiveStrategy" aria-label="Permalink to &quot;\`AdaptiveStrategy\` {#AdaptiveStrategy}&quot;">​</a></h4><ul><li><p>Machine learning-based</p></li><li><p>Q-learning optimization</p></li><li><p>Adjusts to market conditions</p></li><li><p>Self-improving over time</p></li></ul><h4 id="RandomWalkStrategy" tabindex="-1"><code>RandomWalkStrategy</code> <a class="header-anchor" href="#RandomWalkStrategy" aria-label="Permalink to &quot;\`RandomWalkStrategy\` {#RandomWalkStrategy}&quot;">​</a></h4><ul><li><p>Stochastic process-based</p></li><li><p>Geometric Brownian motion</p></li><li><p>Jump diffusion model</p></li><li><p>Models realistic price discovery</p></li></ul><h4 id="CompetitiveEquilibriumStrategy" tabindex="-1"><code>CompetitiveEquilibriumStrategy</code> <a class="header-anchor" href="#CompetitiveEquilibriumStrategy" aria-label="Permalink to &quot;\`CompetitiveEquilibriumStrategy\` {#CompetitiveEquilibriumStrategy}&quot;">​</a></h4><ul><li><p>Game theory optimal</p></li><li><p>Nash equilibrium seeking</p></li><li><p>Risk-adjusted bidding</p></li><li><p>Strategic timing</p></li></ul><h3 id="Strategy-Interface" tabindex="-1">Strategy Interface <a class="header-anchor" href="#Strategy-Interface" aria-label="Permalink to &quot;Strategy Interface {#Strategy-Interface}&quot;">​</a></h3><p>All strategies implement:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_bid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    strategy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BidderStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseline_price</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseline_quantity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    market</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MarketConditions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rng</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Random.AbstractRNG</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Returns named tuple or <code>nothing</code>:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> improved_price,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bid_quantity,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arrival_time_ms,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    priority_fee </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fee_amount</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="Configuration" tabindex="-1">Configuration <a class="header-anchor" href="#Configuration" aria-label="Permalink to &quot;Configuration {#Configuration}&quot;">​</a></h2><h3 id="Default-Configuration" tabindex="-1">Default Configuration <a class="header-anchor" href="#Default-Configuration" aria-label="Permalink to &quot;Default Configuration {#Default-Configuration}&quot;">​</a></h3><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">phantom_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bid_probability = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">duration_ms = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">min_improvement_bps = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max_improvement_bps = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reveal_delay_ms = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">min_participants = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max_phantom_bidders = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">enable_vickrey = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">enable_uniform = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">enable_discriminatory = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><h3 id="Environment-Variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#Environment-Variables" aria-label="Permalink to &quot;Environment Variables {#Environment-Variables}&quot;">​</a></h3><p>Override configuration via environment variables:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUCTION_PHANTOM_AUCTION_BID_PROBABILITY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.4</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUCTION_PHANTOM_AUCTION_MAX_PHANTOM_BIDDERS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUCTION_PHANTOM_AUCTION_DURATION_MS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span></span></code></pre></div><h2 id="Usage-Examples" tabindex="-1">Usage Examples <a class="header-anchor" href="#Usage-Examples" aria-label="Permalink to &quot;Usage Examples {#Usage-Examples}&quot;">​</a></h2><h3 id="Basic-Phantom-Auction" tabindex="-1">Basic Phantom Auction <a class="header-anchor" href="#Basic-Phantom-Auction" aria-label="Permalink to &quot;Basic Phantom Auction {#Basic-Phantom-Auction}&quot;">​</a></h3><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PhantomAuction</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Simple auction execution</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    request,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># baseline price</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    1000.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># quantity</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Millisecond</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">winning_bid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Winner: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">winning_bid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bidder_id)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">price)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Improvement: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">improvement_bps)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h3 id="VCG-Auction-with-Analysis" tabindex="-1">VCG Auction with Analysis <a class="header-anchor" href="#VCG-Auction-with-Analysis" aria-label="Permalink to &quot;VCG Auction with Analysis {#VCG-Auction-with-Analysis}&quot;">​</a></h3><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VCGMechanism</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Create auction</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> VCGAuction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, enable_multi_unit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add real and phantom bids</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bids, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VCGBid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;real_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        50.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        is_phantom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bids, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VCGBid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;phantom_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        50.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        is_phantom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run and analyze</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_vcg_auction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(auction)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Efficiency: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">efficiency)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Revenue: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">total_revenue)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Phantom rate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">phantom_participation_rate)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify properties</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@assert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> individual_rationality_check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">efficiency </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.9</span></span></code></pre></div><h3 id="Monte-Carlo-Simulation" tabindex="-1">Monte Carlo Simulation <a class="header-anchor" href="#Monte-Carlo-Simulation" aria-label="Permalink to &quot;Monte Carlo Simulation {#Monte-Carlo-Simulation}&quot;">​</a></h3><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PhantomAuctionSimulator</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Setup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SimulationConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    num_simulations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    enable_learning </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">market </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MarketConditions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    volatility </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    liquidity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">simulator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PhantomSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config, market)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run simulations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">results </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> run_monte_carlo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(simulator, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Analyze</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">analysis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> analyze_results</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(results)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Print summary</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (metric, stats) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> analysis</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> isa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stats, Dict)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$metric</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;  Mean: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(stats[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mean&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">])</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;  Std: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$(stats[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;std&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">])</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h3 id="Custom-Strategy-Implementation" tabindex="-1">Custom Strategy Implementation <a class="header-anchor" href="#Custom-Strategy-Implementation" aria-label="Permalink to &quot;Custom Strategy Implementation {#Custom-Strategy-Implementation}&quot;">​</a></h3><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Define custom strategy</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyCustomStrategy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> BidderStrategy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    aggressiveness</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Float64</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generate_bid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyCustomStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, price, qty, market, rng)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    improvement </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">aggressiveness</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> improvement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qty,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rng) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        priority_fee </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.001</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use in simulation</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">push!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(simulator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">strategies, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyCustomStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h2 id="Performance-Considerations" tabindex="-1">Performance Considerations <a class="header-anchor" href="#Performance-Considerations" aria-label="Permalink to &quot;Performance Considerations {#Performance-Considerations}&quot;">​</a></h2><h3 id="Latency-Targets" tabindex="-1">Latency Targets <a class="header-anchor" href="#Latency-Targets" aria-label="Permalink to &quot;Latency Targets {#Latency-Targets}&quot;">​</a></h3><ul><li><p>Auction execution: &lt;100ms</p></li><li><p>Bid collection: 50-70ms</p></li><li><p>VCG computation: &lt;10ms</p></li><li><p>Result finalization: &lt;20ms</p></li></ul><h3 id="Optimization-Tips" tabindex="-1">Optimization Tips <a class="header-anchor" href="#Optimization-Tips" aria-label="Permalink to &quot;Optimization Tips {#Optimization-Tips}&quot;">​</a></h3><ol><li><p><strong>Pre-allocate bid arrays</strong> for known participant counts</p></li><li><p><strong>Use type-stable functions</strong> with concrete types</p></li><li><p><strong>Enable multi-threading</strong> for Monte Carlo simulations</p></li><li><p><strong>Cache VCG computations</strong> when possible</p></li><li><p><strong>Profile with <code>@time</code> and <code>@benchmark</code></strong></p></li></ol><h3 id="Scalability" tabindex="-1">Scalability <a class="header-anchor" href="#Scalability" aria-label="Permalink to &quot;Scalability {#Scalability}&quot;">​</a></h3><p>The system scales to:</p><ul><li><p>200+ bidders per auction</p></li><li><p>10,000+ auctions per second</p></li><li><p>1M+ Monte Carlo simulations</p></li></ul><h2 id="Error-Handling" tabindex="-1">Error Handling <a class="header-anchor" href="#Error-Handling" aria-label="Permalink to &quot;Error Handling {#Error-Handling}&quot;">​</a></h2><p>Common errors and solutions:</p><h3 id="InsufficientParticipants" tabindex="-1"><code>InsufficientParticipants</code> <a class="header-anchor" href="#InsufficientParticipants" aria-label="Permalink to &quot;\`InsufficientParticipants\` {#InsufficientParticipants}&quot;">​</a></h3><p>Not enough participants for valid auction.</p><ul><li><p>Increase <code>min_participants</code> threshold</p></li><li><p>Adjust phantom bidder generation</p></li></ul><h3 id="InvalidBidParameters" tabindex="-1"><code>InvalidBidParameters</code> <a class="header-anchor" href="#InvalidBidParameters" aria-label="Permalink to &quot;\`InvalidBidParameters\` {#InvalidBidParameters}&quot;">​</a></h3><p>Bid violates constraints.</p><ul><li><p>Check improvement bounds</p></li><li><p>Verify volume limits</p></li><li><p>Validate priority fees</p></li></ul><h3 id="AuctionTimeout" tabindex="-1"><code>AuctionTimeout</code> <a class="header-anchor" href="#AuctionTimeout" aria-label="Permalink to &quot;\`AuctionTimeout\` {#AuctionTimeout}&quot;">​</a></h3><p>Auction exceeded time limit.</p><ul><li><p>Increase <code>duration_ms</code></p></li><li><p>Optimize bid generation</p></li><li><p>Check system load</p></li></ul><h2 id="Testing" tabindex="-1">Testing <a class="header-anchor" href="#Testing" aria-label="Permalink to &quot;Testing {#Testing}&quot;">​</a></h2><p>Run comprehensive tests:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">julia</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test/simulations/phantom_auction_scenarios.jl</span></span></code></pre></div><p>Key test scenarios:</p><ul><li><p>Market condition variations</p></li><li><p>Strategy performance</p></li><li><p>VCG mechanism properties</p></li><li><p>MEV protection effectiveness</p></li><li><p>Convergence and stability</p></li><li><p>Performance benchmarks</p></li></ul><h2 id="Next-Steps" tabindex="-1">Next Steps <a class="header-anchor" href="#Next-Steps" aria-label="Permalink to &quot;Next Steps {#Next-Steps}&quot;">​</a></h2><ul><li><p><a href="./../theory/phantom_auctions">Theory Documentation</a> - Mathematical foundation</p></li><li><p><a href="./../configuration">Configuration Guide</a> - Detailed configuration</p></li><li><p><a href="./../examples/basic">Examples</a> - More usage examples</p></li></ul>`,169)])])}const E=s(l,[["render",e]]);export{c as __pageData,E as default};
